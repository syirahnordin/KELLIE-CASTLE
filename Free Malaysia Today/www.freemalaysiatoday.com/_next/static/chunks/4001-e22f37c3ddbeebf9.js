"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4001],{4258:function(e,t,n){n.d(t,{Q:function(){return s},GPTProvider:function(){return u}});var o=n(7437),r=n(2265),a=n(6463);let l=(e,t)=>{let[n,o]=(0,r.useState)(!1),a=(0,r.useRef)([]),l=(0,r.useCallback)(()=>{window.googletag&&window.googletag.cmd.push(()=>{try{let e=window.googletag.pubads();e.enableLazyLoad({fetchMarginPercent:500,renderMarginPercent:200,mobileScaling:2}),e.collapseEmptyDivs(),e.setTargeting("lotauds",window.lotaudsList||[]),window.googletag.enableServices(),o(!0),a.current.forEach(e=>e()),a.current=[]}catch(e){console.error("Error initializing GPT:",e)}})},[]);(0,r.useEffect)(()=>(window.googletag?l():window.addEventListener("load",l),()=>{window.removeEventListener("load",l)}),[l]),(0,r.useEffect)(()=>{window.dfpTargetingParams=t},[t]);let i=(0,r.useCallback)(e=>{n?e():a.current.push(e)},[n]);return{isGPTReady:n,registerGPTReadyCallback:i}},i=(e,t,n)=>{let o=(0,r.useRef)({}),a=(0,r.useRef)(!1),l=(0,r.useRef)(!1),i=(0,r.useCallback)((e,n)=>n?"".concat(t,"_").concat(e):e,[t]),d=(0,r.useCallback)(function(e){var t,r,a,l,i;let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(o.current[e])return;let u={name:d.name||e,id:d.id||e,sizes:d.sizes||[[1,1]],withPrefix:null===(t=d.withPrefix)||void 0===t||t,outOfPage:null!==(r=d.outOfPage)&&void 0!==r&&r,isInterstitial:null!==(a=d.isInterstitial)&&void 0!==a&&a,displayNow:null!==(l=d.displayNow)&&void 0!==l&&l,customDfpTargetingParams:d.customDfpTargetingParams,dfpTargetingParams:{...n,...d.dfpTargetingParams}};o.current[e]={slot:null,mounted:!0,displayed:!1,isInterstitial:null!==(i=u.isInterstitial)&&void 0!==i&&i,params:u},null==s||s()},[n]),s=(0,r.useCallback)(e=>{var t;let{id:n,...r}=e;o.current[n]={...null!==(t=o.current[n])&&void 0!==t?t:{slot:null,mounted:!0,unmounted:!1,destroyed:!1,displayed:!1,isInterstitial:!1},...r}},[]),u=(0,r.useCallback)(e=>{if(!o.current[e])return;let{[e]:t,...n}=o.current;o.current=n},[]);return{pageAdSlotsRef:o,isRemovingPageAdSlotsRef:a,isDefiningPageAdSlotsRef:l,addPageAdSlot:d,updatePageAdSlot:s,softRemovePageAdSlot:u,removeAdSlots:(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise(t=>{window.googletag.cmd.push(()=>{try{t(e.length?window.googletag.destroySlots(e):window.googletag.destroySlots())}catch(e){console.error("Error removing ad slots:",e),t(!1)}})})},[]),definePageAdSlot:(0,r.useCallback)((t,o)=>{var r,a;null===(a=window)||void 0===a||null===(r=a.googletag)||void 0===r||r.cmd.push(()=>{try{var r,a,l,d,s,u,c,g,m,f;let w;let{name:v,withPrefix:h=!0,id:p,sizes:b,outOfPage:y=!1,isInterstitial:P=!1,customDfpTargetingParams:S,displayNow:E=!1}=t,T=i(v,h);if(y){let t=P?null===(a=window)||void 0===a?void 0:null===(r=a.googletag)||void 0===r?void 0:r.enums.OutOfPageFormat.INTERSTITIAL:p;(w=null===(d=window)||void 0===d?void 0:null===(l=d.googletag)||void 0===l?void 0:l.defineOutOfPageSlot("/".concat(e,"/").concat(T),t))||!P||console.info("Web interstitial is not supported on this page.")}else w=null===(u=window)||void 0===u?void 0:null===(s=u.googletag)||void 0===s?void 0:s.defineSlot("/".concat(e,"/").concat(T),b,p);w&&(w.addService(null===(g=window)||void 0===g?void 0:null===(c=g.googletag)||void 0===c?void 0:c.pubads()),Object.entries({...n,...S}).forEach(e=>{let[t,n]=e;w.setTargeting(t,n)}),E&&(null===(f=window)||void 0===f||null===(m=f.googletag)||void 0===m||m.display(p))),null==o||o({id:p,slot:w,isInterstitial:P})}catch(e){console.error("Error defining ad slot:",e)}})},[n,i,e])}},d=(e,t,n,o,a)=>{let[l,i]=(0,r.useState)(!1),[d,s]=(0,r.useState)(!0),u=(0,r.useCallback)(()=>{var o,r,l,d;a.current=!0,null===(r=window)||void 0===r||null===(o=r.googletag)||void 0===o||o.cmd.push(()=>{Object.values(n.current).forEach(n=>{e(n.params,t)})}),null===(d=window)||void 0===d||null===(l=d.googletag)||void 0===l||l.cmd.push(()=>{a.current=!1,s(!1),i(!0)})},[e,t,n,a]);return(0,r.useEffect)(()=>{if(!l)return;let e=Object.values(n.current).filter(e=>!e.isInterstitial);if(!e.every(e=>{let{slot:t,mounted:n,displayed:o}=e;return t&&n&&!o})){console.error("Page ad slots not all mounted and defined, need to troubleshoot");return}window.googletag.cmd.push(()=>{window.googletag.enableServices()}),window.googletag.cmd.push(()=>{e.forEach(e=>{let{params:n}=e;window.googletag.display(n.id),t({id:n.id,displayed:!0}),i(!1)})})},[l,t,n]),{shouldForceDefinePageAdSlots:d,definePageAdSlots:u}},s=(0,r.createContext)({pageAdSlots:null,pageMounted:!1,isGoogleTagLoaded:!1,isRemovingPageAdSlots:!1,definePageAdSlot:()=>console.warn("definePageAdSlot has not been implemented"),addPageAdSlot:()=>console.warn("addPageAdSlot has not been implemented"),softRemovePageAdSlot:()=>console.warn("softRemovePageAdSlot has not been implemented"),hardRemovePageAdSlots:()=>console.warn("hardRemovePageAdSlots has not been implemented"),setPageMounted:()=>console.warn("setIsPageMounted has not been implemented"),injectBodyAdSlots:()=>console.warn("injectBodyAdSlots has not been implemented"),removeAdSlots:()=>(console.warn("removeAdSlots has not been implemented"),Promise.resolve()),isGPTReady:!1,registerGPTReadyCallback:()=>console.warn("registerGPTReadyCallback has not been implemented")}),u=e=>{let{children:t,prefix:n,networkId:u,bodyAdSlots:c,dfpTargetingParams:g}=e,m=(0,a.usePathname)(),[f,w]=(0,r.useState)(!1),{isGPTReady:v,registerGPTReadyCallback:h}=l(null!=u?u:"1009103",g||{}),{pageAdSlotsRef:p,isRemovingPageAdSlotsRef:b,isDefiningPageAdSlotsRef:y,addPageAdSlot:P,updatePageAdSlot:S,softRemovePageAdSlot:E,removeAdSlots:T,definePageAdSlot:A}=i(null!=u?u:"1009103",null!=n?n:"FMT",g||{}),[k,R]=(0,r.useState)(!1),{definePageAdSlots:C}=d(A,S,p,b,y),x=(0,r.useCallback)(()=>{Object.entries(c||{}).forEach(e=>{let[t,n]=e;(null==n?void 0:n.id)&&E(n.id)}),b.current=!0,T().then(()=>{b.current=!1,R(!0)})},[E,T,c,b]),I=(0,r.useCallback)(()=>{Object.entries(c||{}).forEach(e=>{let[t,n]=e;if(null==n?void 0:n.id){if(n.isInterstitial){P(n.id,n);return}let e=document.getElementById(n.id);e||((e=document.createElement("div")).id=n.id,document.body.prepend(e)),P(n.id,{...n,customDfpTargetingParams:n.addCustomDfpTargetingParams?{inskin_yes:"".concat(window.screen.width>=1376)}:void 0})}})},[P,c]);(0,r.useEffect)(()=>{w(!0),window&&window.googletag&&(window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push(()=>{if(!window.googletag.apiReady){console.error("GPT API not ready when trying to refresh ads.");return}"function"==typeof window.googletag.pubads?(C(),I(),window.googletag.pubads().refresh()):console.error("pubads service not available.")}))},[m,C,I]),(0,r.useEffect)(()=>{k&&f&&C&&!b.current&&!y.current&&C()},[k,C,f,y,b]),(0,r.useEffect)(()=>{(async()=>{try{await new Promise((e,t)=>{let n=document.createElement("div");n.innerHTML="&nbsp;",n.className="adsbox",document.body.appendChild(n),window.setTimeout(()=>{0===n.offsetHeight&&t(Error("Ad blocker detected")),e(void 0),n.remove()},100)})}catch(e){console.log("Ad blocker detected")}})()},[p]);let O=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4,n=e=>{let t=document.getElementById(e);if(!t)return!1;let n=t.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)},o=setInterval(()=>{n(e)&&window.googletag.cmd.push(()=>{var t;let n=null===(t=p.current[e])||void 0===t?void 0:t.slot;n&&window.googletag.pubads().refresh([n])})},t);return()=>clearInterval(o)},[p]),j=(0,r.useMemo)(()=>({addPageAdSlot:P,softRemovePageAdSlot:E,definePageAdSlot:A,removeAdSlots:T,isGPTReady:v,registerGPTReadyCallback:h,pageAdSlots:p.current,pageMounted:f,isGoogleTagLoaded:v,isRemovingPageAdSlots:b.current,hardRemovePageAdSlots:x,setPageMounted:()=>w(!0),injectBodyAdSlots:I,refreshAdSlot:O}),[P,E,A,T,v,h,f,x,I,O,b,p]);return(0,o.jsx)(s.Provider,{value:j,children:t})}},4001:function(e,t,n){n.r(t);var o=n(7437),r=n(2265),a=n(4258),l=n(7440);t.default=e=>{let{id:t,sizes:n,name:i,dfpTargetingParams:d={},customStyle:s={},className:u="",withPrefix:c=!0,onlyDesktop:g=!1,onlyMobile:m=!1,alwaysShow:f=!1,hideWhenDesktop:w=!1,hideWhenMobile:v=!1,selfDefine:h=!1}=e,{addPageAdSlot:p,softRemovePageAdSlot:b,definePageAdSlot:y,removeAdSlots:P,isGPTReady:S,registerGPTReadyCallback:E}=(0,r.useContext)(a.Q),[T,A]=(0,r.useState)(!1),k=(0,r.useRef)(null),[R,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>C(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let x=f||g&&!R||m&&R;if((0,r.useEffect)(()=>{let o=e=>{e&&Object.entries(d).forEach(t=>{let[n,o]=t;Array.isArray(o)?e.setTargeting(n,o):e.setTargeting(n,o.toString())})},r=()=>{let r={id:t,sizes:n,name:i,customDfpTargetingParams:e.dfpTargetingParams,withPrefix:c};h&&!k.current?y({...r,displayNow:!1},e=>{let{slot:n}=e;k.current=n,o(n),window.googletag.display(t),A(!0)}):h||p(t,r,()=>{o(window.googletag.pubads().getSlots().find(e=>e.getSlotElementId()===t)),window.googletag.display(t),A(!0)})};return x&&(S?r():"function"==typeof E?E(r):(console.warn("GPT is not ready and registerGPTReadyCallback is not available"),setTimeout(r,1e3))),()=>{k.current?(P([k.current]),A(!1)):h||b(t)}},[p,y,P,b,t,h,d,e.dfpTargetingParams,n,i,c,x,S,E]),(0,r.useEffect)(()=>{if(!h&&b&&t)return()=>{b(t),A(!1)}},[b,t,h]),(0,r.useEffect)(()=>{if(P)return()=>{k.current&&P([k.current]),A(!1)}},[P,t,h]),!x)return null;let{maxWidth:I,maxHeight:O}=(0,l.TB)(n);return(0,o.jsx)("div",{className:(0,l.cn)(u,"my-4 flex h-full flex-col items-center justify-center overflow-hidden rounded-sm",{"desktop-ads":g&&!R,"mobile-ads":m&&R,"bg-white":T,"bg-gray-50":!e.dfpTargetingParams||!T}),id:t,style:s,children:(!e.dfpTargetingParams||!T)&&(0,o.jsx)("div",{className:"flex h-full items-center justify-center text-sm text-gray-500"})})}},7440:function(e,t,n){n.d(t,{Ei:function(){return l},TB:function(){return i},Z2:function(){return u},cn:function(){return a},sj:function(){return d}});var o=n(4839),r=n(6164);let a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,o.W)(t))},l=e=>{let t=e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return t?t[1]:""},i=e=>Array.isArray(e[0])?{maxWidth:Math.max(...null==e?void 0:e.map(e=>e[0])),maxHeight:Math.max(...null==e?void 0:e.map(e=>e[1]))}:{maxWidth:e[0],maxHeight:e[1]},d=e=>{let t=e.match(/<p\b[^>]*>[\s\S]*?<\/p>/gi);if(t&&t.length>1){let n=e;return t.length>1&&(n=s(n,t[1],'<var class="In_Article_Midrec"></var>')),t.length>3&&(n=s(n,t[3],'<var class="ROS_1x1"></var>')),t.length>7&&(n=s(n,t[7],'<var class="ROS_Mobile_Leaderboard_b"></var>')),t.length>11&&(n=s(n,t[11],'<var class="ROS_Midrec"></var>')),n=(n=s(n,t[t.length-1],'<var class="followPlatforms"></var>')).replace(/http:\/\//g,"https://")}return e};function s(e,t,n){let o=e.indexOf(t)+t.length;return e.slice(0,o)+n+e.slice(o)}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{keepQueryStringKeys:n=[],includeOrigin:o=!0}=t,r=new URL("".concat("https://www.freemalaysiatoday.com/").concat(e)),a=new URLSearchParams;for(let[e,t]of Array.from(r.searchParams.entries()))n.includes(e)&&t&&a.append(e,t);let l=o?r.origin:"",i="".concat(r.pathname.endsWith("/")?r.pathname:"".concat(r.pathname,"/")),d=Array.from(a.keys()).length?"?".concat(a):"";return"".concat(l).concat(i).concat(d)}}}]);